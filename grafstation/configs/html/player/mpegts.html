<!DOCTYPE html>
<body style="background-color: black;" >
<script src="./mpegts.js"></script>
<video controls autoplay id="videoElement" width="100%" height="100%"></video>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const channelId = urlParams.get('channel');
    const isMute = urlParams.get('muted');

    if(isMute == "true") {
        var videoTag = document.getElementsByTagName('video')[0];
        videoTag.muted = true;
    }

    if (mpegts.getFeatureList().mseLivePlayback) {
        var videoElement = document.getElementById('videoElement');
        var player = mpegts.createPlayer({
            type: 'mse',
            isLive: true,
            url: 'http://grafstation.local:8888/api/streams/live/' + channelId + '/m2tsll?mode=0'
        });
        player.attachMediaElement(videoElement);
        player.load();
        player.play();
    }
</script>
</body>
</html>
